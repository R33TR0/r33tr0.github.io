let langdata = {
    "languages": {
        "ar": {
            "strings": {
                "Ar": "العربية",
                "En": "الإنجليزية",
                "Fr": "الفرنسية",
                "De": "الألمانية",
                "Am": "الأمازيغية",
                "about": "نبذة مختصرة",
                "experience": "الخبرة",
                "education": "التعليم",
                "skills": "المهارات",
                "interests": "مركز الاهتمام",
                "language": "اللغات",
                "name": "الإدريسي أيمن",
                "statut": "مهندس إعلاميات متدرب",
                "desc": "شاب طموح ، 23 سنة ، خريج ديتي في علوم الكمبيوتر وحاليا في السنة الثانية من هندسة الكمبيوتر في مدرسة سوب غاليلي.",
                "cntct": "إتصال",
                "mail": "aymane.elidrissi@test:com :البريد الإلكتروني",
                "site": "www.elidrissi-sup.great-site.net :الموقع الإلكتروني",
                "tel": "+336234567890 :الهاتف",
                "schll": "www.sup-galilee.univ-paris13.fr :رابط المدرسة",
                "ttl": "محلل مطور",
                "bnp": "بي إن بي باريبا لحلول التأجير",
                "bnp_d": "بالتناوب في بي إن بي باريبا لحلول التأجير حيث أنا جزء من فريق معالجة الوثائق حيث أعمل على مهام مع فريق النشر ، التنظيم الإداري والأرشفة.",
                "bnp_time": "منذ سبتمبر 2021",
                "stfl": "التدريب في نهاية الدراسة-درجة الاجازة",
                "stfl_p": "هيل ميتالباو ، ألمانيا",
                "stfl_d": "بورجيت في شكل تطبيق ويب يسمح لك بإدارة وحساب فواتير الشركة عبر الإنترنت.",
                "stfl_t": "يونيو 2020-أغسطس 2020",
                "stfd": "التدريب في نهاية الدراسة",
                "stfd_p": "هذه الوكالة ، المغرب",
                "stfd_d": "مدير المشروع 'وجدة 360' الذي يتألف من توثيق واكتشاف الراهب باتري من مدينة وجدة تقريبا. أنا أيضا إنشاء واجهة ويب لجمع طلبات العملاء كجزء من ديجيتال ماركيتينغ. تعلمت أيضا كيفية إنشاء العديد من مقاطع الفيديو الاحترافية.",
                "stfd_t": "يناير 2019-أغسطس 2019",
                "stpd": "تدريب السنة الأولى-دوت",
                "stpd_p": "مستشفى محمد السادس الجامعي-وجدة ، المغرب",
                "stpd_d": ".تنفيذ شاتبوت تحت بايثون الذي يجيب على أسئلة المرضى من خلال الموقع الرسمي. لقد قمت أيضًا بإنشاء تطبيق أندرويد شكل ماسح ضوئي لرمز الاستجابة السريعة يسمح بمعلومات عن الخدمات والمزايا التي يقدمها المركز",
                "stpd_t": "يونيو 2018-يوليو 2018",
                "sup": "مدرسة جاليليو سوب للهندسة",
                "sup_p": "شهادة في هندسة الحاسوب",
                "sup_d": "خلال سنتي الثانية في دورة هندسة الكمبيوتر.",
                "sup_t": "سبتمبر 2020-أغسطس 2023",
                "ulille": "جامعة ليل كلية العلوم والتكنولوجيا",
                "ulille_p": "درجة الاجازة في علوم الحاسب وعلوم الحاسب",
                "ulille_d": "بعد أن أكملت دراستي في رخصة السنة الثالثة",
                "ulille_t": "سبتمبر 2019 - يوليو 2020",
                "esto": "المدرسة العليا للتكنولوجيا بوجدة المغرب",
                "esto_p": "دبلوم في تطوير تكنولوجيا المعلومات",
                "esto_d": "دبلوم مع مرتبة الشرف العالية.",
                "esto_t": "سبتمبر 2017-يوليو 2019",
                "fstt": "كلية العلوم التقنية في طنجة ، المغرب",
                "fstt_p": "ديست في الرياضيات والفيزياء وعلوم الكمبيوتر",
                "fstt_d": "السنة الأولى من ديوست",
                "fstt_t": "سبتمبر 2016-يوليو 2017",
                "baco": "ثانوية زينب النفزاوية وجدة ، المغرب",
                "baco_p": "بكالوريوس العلوم في الرياضيات",
                "baco_d": "العلوم في الرياضيات",
                "baco_t": "يوليو 2016",
                "lpo": "لغات البرمجة وأدواتها",
                "cpcp": "الكفاءة الشخصية",
                "teep": "العمل الجماعي",
                "crtv": "الإِبداع",
                "cmmc": "التواصل",
                "orgn": "التنظيم",
                "ldrshp": "القيادة",
                "entprn": "ريادة الأعمال",
                "bsktb": "كرة السلة",
                "bxng": "الملاكمة",
                "flmng": "صناعة الأفلام"
            }

        },
        "en": {
            "strings": {
                "Ar": "Arab",
                "En": "English",
                "Fr": "French",
                "De": "German",
                "Am": "Amazigh",
                "about": "About",
                "experience": "Experience",
                "education": "Education",
                "skills": "Skills",
                "interests": "Interests",
                "language": "Languages",
                "name": "EL IDRISSI Aymane",
                "statut": "Apprentice computer engineer",
                "desc": "Young and ambitious, 23 years old, graduated with a DUT in computer science and currently in the second year of computer engineering cycle in apprenticeship at the SUP Galilée school.",
                "cntct": "Contact",
                "mail": "E-mail: aymane.elidrissi@test:com",
                "site": "Site: www.elidrissi-sup.great-site.net",
                "tel": "Phone: +336234567890",
                "schll": "School: www.sup-galilee.univ-paris13.fr",
                "ttl": "Apprentice computer engineer",
                "bnp": "BNP PARIBAS Leasing Solutions",
                "bnp_d": "Apprentices at BNP Paribas Leasing Solutions where I am part of the document processing team where I work on assignments with the Publishing team, EDM and Archiving.",
                "bnp_time": "Since Septembre 2021",
                "stfl": "End-of-Study Internship - BACHELOR's DEGREE",
                "stfl_p": "HEL-METALLBAU, Germany",
                "stfl_d": "Porjet in the form of a web application that allows you to manage and calculate company invoices online.",
                "stfl_t": "June 2020-August 2020",
                "stfd": "End-of-Study Internship - DUT",
                "stfd_p": "THIS Agency, Morocco",
                "stfd_d": "Project manager 'Oujda 360' which consisted of documenting and discovering the monk patri of the city of Oujda virtually. I also created a web interface to collect customer requests as part of digital marketing. I also learned how to make several professional videos.",
                "stfd_t": "January 2019 - August 2019",
                "stpd": "First year internship - DUT",
                "stpd_p": "Mohammed VI University Hospital-Oujda, Morocco",
                "stpd_d": "Realization of a PYTHON-based 'CHATBOT' that answers patients questions through the official website. I also made an android application in the form of a QR code scanner allowing to have information about the services and benefits offered by the CHU.",
                "stpd_t": "June 2018 - July 2018",
                "sup": "Galileo Sup Engineering School",
                "sup_p": "Diploma in computer engineering (in apprenticeship)",
                "sup_d": "In the course of my second year in computer engineering cycle in apprenticeship.",
                "sup_t": "September 2020 - August 2023",
                "ulille": "University of lille faculty of science and technology",
                "ulille_p": "Bachelor's Degree in Computer Science",
                "ulille_d": "Having continued my studies in the third year Bachelor's degree.",
                "ulille_t": "September 2019 - July 2020",
                "esto": "Oujda Higher School of Technology, Morocco",
                "esto_p": "DUT in Computer Science",
                "esto_d": "Dut diploma with honors very well.",
                "esto_t": "September 2017 - July 2019",
                "fstt": "Faculty of Technical Sciences of Tangier, Morocco",
                "fstt_p": "DEUST in Maths, Physics and Computer Science",
                "fstt_d": "The first year of the DEUST",
                "fstt_t": "September 2016 - July 2017",
                "baco": "Zineb Ennafzaouia high school Oujda, Morocco",
                "baco_p": "Bac of Mathematiques Science",
                "baco_d": "Mathematiques Science",
                "baco_t": "July 2016",
                "lpo": "Programmation languages and tools",
                "cpcp": "Personal Skills",
                "teep": "Teamwork",
                "crtv": "Creativity",
                "cmmc": "Communication",
                "orgn": "Organization",
                "ldrshp": "Leadership",
                "entprn": "Entreprenariat",
                "bsktb": "Basketball",
                "bxng": "Boxing",
                "flmng": "Film making"
            }
        },
        "fr": {
            "strings": {
                "Ar": "Arabe",
                "En": "Anglais",
                "Fr": "Français",
                "De": "Allemande",
                "Am": "Amazighe",
                "about": "Résumé",
                "experience": "Expérience",
                "education": "Formation",
                "skills": "Compétences",
                "interests": "Centre d'intérêt",
                "language": "Langues",
                "name": "EL IDRISSI Aymane",
                "statut": "Ingénieur Apprentis en informatique",
                "desc": "Jeune et ambitieux, âgé de 23 ans, diplômé d'un DUT en informatique et actuellement en deuxième année cycle d'ingénieur informatique en apprentissage à l'école SUP Galilée.",
                "cntct": "Contact",
                "mail": "E-mail: aymane.elidrissi@test:com",
                "site": "Site: www.elidrissi-sup.great-site.net",
                "tel": "Tel: +336234567890",
                "schll": "Ecole: www.sup-galilee.univ-paris13.fr",
                "ttl": "Développeur Analyste en apprentissage",
                "bnp": "BNP PARIBAS Leasing Solutions",
                "bnp_d": "Alternant chez la BNP Paribas Leasing Solutions dont je fais partie de l'équipe de traitement des documents où je travaille sur des missions avec l'équipe de l'Éditique, la GED et l'Archivage.",
                "bnp_time": "Depuis deptembre 2021",
                "stfl": "Stage de Fin d'Étude - LICENCE",
                "stfl_p": "HEL-METALLBAU, Allemagne",
                "stfl_d": "Porjet sous forme d'une application web qui permet de gérer et calculer des factures de l'entreprise en ligne.",
                "stfl_t": "Juin 2020 - Août 2020",
                "stfd": "Stage de Fin d'Étude - DUT",
                "stfd_p": "THIS Agency, Maroc",
                "stfd_d": "Chef de projet 'Oujda 360' qui consistait de documenter et de découvrir le patri moine de la ville d'Oujda virtuellement. J'ai réalisé aussi une interface web pour collecter les demandes des clients dans le cadre du digital marketing. J'ai appris aussi réaliser plusieurs vidéos professionnelles.",
                "stfd_t": "Janvier 2019 - Août 2019",
                "stpd": "Stage de première année - DUT",
                "stpd_p": "Centre Hospitalier Universitaire Mohammed VI-Oujda, Maroc",
                "stpd_d": "Réalisation d'un « CHATBOT » sous PYTHON qui répond aux questions des patients à travers le site web officiel. J'ai réalisé aussi une application android sous forme d'un scanner des codes QR permettant d'avoir aux informations sur les services et prestations offertes par le CHU.",
                "stpd_t": "Juin 2018 - Juillet 2018",
                "sup": "Ecole d'ingénieur Sup Galilée",
                "sup_p": "Diplôme d'ingénieur informatique (en apprentissage)",
                "sup_d": "En cours de ma deuxième année en cycle d'ingénieur informatique en apprentissage.",
                "sup_t": "Septembre 2020 - Août 2023",
                "ulille": "Université de lille faculté des sciences et technologies",
                "ulille_p": "Licence Informatique Parcours Informatique",
                "ulille_d": "Ayant poursuivi mes études en troisième année Licence.",
                "ulille_t": "Septembre 2019 - Juillet 2020",
                "esto": "École supérieure de technologie d'Oujda, Maroc",
                "esto_p": "DUT en développement Informatique",
                "esto_d": "Diplôme dut avec mention très bien.",
                "esto_t": "Septembre 2017 - Juillet 2019",
                "fstt": "Faculté des Sciences Techniques de Tanger, Maroc",
                "fstt_p": "DEUST en Maths, Physique et Informatique",
                "fstt_d": "La première année du DEUST",
                "fstt_t": "Septembre 2016 - Juillet 2017",
                "baco": "Lycée Zineb Ennafzaouia Oujda, Maroc",
                "baco_p": "Baccalauréat Sciences Mathématiques",
                "baco_d": "BAC sciences Maths",
                "baco_t": "Juillet 2016",
                "lpo": "Langage de Programmation & Outils",
                "cpcp": "Compétence Personnelle",
                "teep": "Travail en équipe",
                "crtv": "Créativité",
                "cmmc": "Communication",
                "orgn": "Organisation",
                "ldrshp": " Leadership",
                "entprn": " Entreprenariat",
                "bsktb": " Basketball",
                "bxng": " Boxe Anglaise",
                "flmng": " Réalisation cinématique"
            }
        }
    }
}


function applyStrings(containers) {
    containers.forEach(container => {
        //find all the elements that have title
        let locale = container.getAttribute('lang');
        //console.log('looking inside of ', locale);
        container.querySelectorAll(`[title]`).forEach(element => {
            let key = element.getAttribute('title');
            //console.log(element);
            //console.log(key);
            let lang = locale.substr(0, 2); //first 2 characters
            if (key) {
                element.textContent = langdata.languages[lang].strings[key];
            }
        });
    })
}

function findLocaleMatch() {
    let keys = Object.keys(langdata.languages); //from our data
    let locales = Intl.getCanonicalLocales(keys); //from our data validated

    let lang = navigator.language; //from browser 
    let locale = Intl.getCanonicalLocales(lang); //from browser validated
    console.log('browser language', lang);
    console.log('locales from data file', locale);

    //find the match for locale inside locales
    let langMatch = document.documentElement.getAttribute('lang'); //default
    locales = locales.filter(l => locale == l);
    langMatch = (locales.length > 0) ? locales[0] : langMatch;
    return langMatch;
}

function changeLang() {

    let langValue = document.getElementById("lang").value;
    console.log("option: ", langValue);
    document.getElementById("cv").lang = langValue;
    console.log("cv: ", document.getElementById("cv").lang);


    //skip the lang value in the HTML tag for this example
    let zones = document.querySelectorAll('html [lang]');
    applyStrings(zones);

    let lang = findLocaleMatch();
    let container = document.querySelector(`html [lang*=${lang}]`);
    if (container)
        container.className = 'lang-match';
}